<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>TURTLEDOVE demo UI</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="./static/css/normalize.css">
    <link rel="stylesheet" href="./static/css/skeleton.css">
    <link rel="stylesheet" href="./static/css/skeleton-tabs.css">
    <script src="./static/js/skeleton-tabs.js"></script>
    <style>
        body {
            background: #ebdcff;
        }

        iframe {
            border: none;
        }

        th {
            font-weight: bold;
        }

        table {
            border-collapse: collapse;
        }

        table, th, td {
            border: 1px solid black;
        }

        button {
            margin: 10px;
        }
    </style>
</head>
<body>

<div class="container" style="margin-top: 5%">
    <h1>TURTLEDOVE demo UI</h1>
    <p>
        This is a simple user interface of a simulation created to visualize and help to understand a <a
            href="https://github.com/WICG/turtledove">TURTLEDOVE proposal</a> - a
        novel approach to privacy in online advertising. To know more about how to explore our demo, check out
        <a href="https://github.com/dervan/turtledove-demo">README in our repo</a>.
    </p>
    <ul class="tab-nav">
      <li><a class="button active" data-pane="#ads">Fetched ads</a></li>
      <li><a class="button" data-pane="#products">Fetched products</a></li>
      <li><a class="button" data-pane="#winners">Winner ads</a></li>
      <li><a class="button" data-pane="#reset">Data reset</a></li>
    </ul>
    <div class="tab-content">
      <!-- RESET PANE -->
      <div class="tab-pane" id="reset">
        <h2>Data reset</h2>
        <p>If you want to delete all data from demo local storage, use this button:</p>
        <button class="button-primary" id="clean-button">Clean data</button>
      </div>

      <!-- ADS PANE -->
      <div class="tab-pane active" id="ads">
      <h2>Fetched ads</h2>
      <p> All ads fetched because of joining an interest group:</p>
      <table id="fetched-ads">
          <thead>
          <tr>
              <th>Ad id</th>
              <th>Ad</th>
              <th>Bidding function</th>
              <th>Interest group signals</th>
          </tr>
          </thead>
      </table>
      </div>
     
      <!-- PRODUCTS PANE -->
      <div class="tab-pane" id="products">
      <h2>Fetched products</h2>
      <p>This table contains all products that were fetched for some user-group. Those are valid only in Product-Level TURTLEDOVE which is a proposal described <a href="https://github.com/jonasz/product_level_turtledove">in a dedicated repository</a>.
        Note that association with user-group may be not current but a product will still be cached here.</p>
      <table id="products-table">
          <thead>
          <tr>
              <th>Owner</th>
              <th>Ad network</th>
              <th>Id</th>
              <th>Iframe</th>
              <th>Remove</th>
          </tr>
          </thead>
      </table>
      </div> 

      <!-- WINNERS PANE -->
      <div class="tab-pane" id="winners">
        <h2>Shown ads</h2>
        <p>This table contains all ads that won an auction in the past, together with a price and a publisher's address. </p>
        <table id="winners-ads">
            <thead>
            <tr>
                <th>Website</th>
                <th>Price</th>
                <th>Ad</th>
                <th>Context signals</th>
                <th>Time</th>
            </tr>
            </thead>
        </table>
      </div>
    </div>
</div>
<script type="module">
  import { fillAdsTable, fillWinnersTable, fillProductsTable } from './static/js/user-interface.js'
  import { resetStorage } from './static/js/common.js'

  document.getElementById('clean-button').onclick = () => {
    resetStorage()
    location.reload()
  }
  fillAdsTable()
  fillProductsTable()
  fillWinnersTable()
</script>
</body>
</html>
